{%load static%}
<!DOCTYPE html>
<html>
<head>

    <!-- Bootstrap -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/dashboard/dash_ui/static/css/style.css">
    
    <!--for Google Charts-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


    <meta http-equiv="refresh" content="5">


    <!-- Google Charts -->
    <!-- Text Charts -->
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.load('current', {'packages':['sankey']});
        google.charts.load('current', {'packages':['gauge']});

        google.charts.setOnLoadCallback(talkChart);
        google.charts.setOnLoadCallback(overlapChart);
        google.charts.setOnLoadCallback(backChart);
        google.charts.setOnLoadCallback(interactionChart);
        google.charts.setOnLoadCallback(emotionChart);

        google.charts.setOnLoadCallback(drawChart);
  
        //talk chart
        function talkChart() {
  
            var data = google.visualization.arrayToDataTable([
                ['Participant', 'Talking Time'],
                {% for pair in talk_data %}
                    ['{{ pair.0 }}', {{ pair.1 }}],
                {% endfor %}
            ]);
  
            var options = {
                backgroundColor: '#f1f1f1',
                legend: 'none',
                fontName: 'Times New Roman',

                chartArea: {width:'{{pie_options.0}}%', height:'{{pie_options.0}}%'},
                pieSliceText: '{{pie_options.1}}',
                tooltip: {trigger: '{{pie_options.2}}'},
                fontSize: '{{pie_options.3}}',
                
                slices: {
                    
                    0: { color: '{{all_colors.0}}' },
                    1: { color: '{{all_colors.1}}' },
                    2: { color: '{{all_colors.2}}' },
                    3: { color: '{{all_colors.3}}' },
                    4: { color: '{{all_colors.4}}' },
                    5: { color: '{{all_colors.5}}' }
                }
            };
    
            var chart = new google.visualization.PieChart(document.getElementById('talkchart'));
    
            chart.draw(data, options);
        }

        //overlap chart
        function overlapChart() {

            var data = google.visualization.arrayToDataTable([
                ['Participant', 'Talk Time', { role: 'style' } ],
                {% for group in overlap_data %}
                    ['{{ group.0 }}', {{ group.1 }}, 'color: {{group.2}}'],
                {% endfor %}
            ]);


            var options = {
                hAxis: {
                    title: 'Participants',
                    textStyle: { color: 'transparent'},
                    gridlines: { color: '{{bar_options.0}}'},
                    textPosition: '{{bar_options.1}}',
                    titleTextStyle: {color: '{{bar_options.4}}'}
                },
                vAxis: {
                    title: 'Overlaps',
                    format: 'decimal',
                    gridlines: { color: '{{bar_options.0}}'},
                    textPosition: '{{bar_options.1}}',
                    titleTextStyle: {color: '{{bar_options.4}}'}
                },
                fontName: 'Times New Roman',
                legend: 'none',
                backgroundColor: '#f1f1f1',
                fontSize: '12',

                tooltip: {trigger: '{{bar_options.2}}'}
            };

            var chart = new google.visualization.ColumnChart(
            document.getElementById('overlapchart'));

            chart.draw(data, options);
        }

        //back-channel chart
        function backChart() {

            var data = google.visualization.arrayToDataTable([
                ['Participant', 'Talk Time', { role: 'style' } ],
                {% for group in backchannel_data %}
                    ['{{ group.0 }}', {{ group.1 }}, 'color: {{group.2}}'],
                {% endfor %}
            ]);


            var options = {
                hAxis: {
                    title: 'Participants',
                    textStyle: { color: 'transparent'},
                    gridlines: { color: '{{bar_options.0}}'},
                    textPosition: '{{bar_options.1}}',
                    titleTextStyle: {color: '{{bar_options.4}}'}
                },
                vAxis: {
                    title: 'Channels',
                    format: 'decimal',
                    gridlines: { color: '{{bar_options.0}}'},
                    textPosition: '{{bar_options.1}}',
                    titleTextStyle: {color: '{{bar_options.4}}'}
                },
                fontName: 'Times New Roman',
                legend: 'none',
                backgroundColor: '#f1f1f1',
                fontSize: '12',

                tooltip: {trigger: '{{bar_options.2}}'}
            };

            var chart = new google.visualization.ColumnChart(
            document.getElementById('backchart'));

            chart.draw(data, options);
        }

        //interactions chart
        //Sankey Chart
        function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'From');
        data.addColumn('string', 'To');
        data.addColumn('number', 'Weight');
        data.addRows([
            {% for each in interaction_data%}
                ['{{each.0}}', '{{each.1}}', {{each.2}}],
            {% endfor %}
        //['Person 1', 'Person 2', 6], ['Person 1', 'Person 3', 2], ['Person 1', 'Person 4', 8], ['Person 1', 'Person 5', 1]

        ]);

        var colors = [
            {% for each_color in interaction_colors%}
                '{{each_color}}',
            {% endfor %}
            // '#006992', '#bc4b51', '#eca400', '#5b8e7d', '#784c9f'
        ] ;

        // Sets chart options.
        var options = {
                tooltip: {
                    trigger: 'selection',
                    textStyle: {
                        color: '#000',
                        fontName: 'Times New Roman',
                        fontSize: '11',
                    }
                    //isHtml: '{{sankey_options.0}}',
                    
                },
                sankey: {
                    node: {
                        colors: colors,
                        label: { 
                            color: 'transparent',
                        },
                        interactivity: false,
                    },
                    link: {
                        colorMode: 'target',
                        color: { fill: '#d799ae', fillOpacity: 0.9 },
                    }
                } 
            };

        // Instantiates and draws our chart, passing in some options.
        var chart = new google.visualization.Sankey(document.getElementById('sankey_basic'));
        chart.draw(data, options);
      }

        
        // DOESN'T WORK
        //interactions chart
        //Sankey Chart
        function interactionChart() {

            var data = google.visualization.arrayToDataTable([
                //['Participant', 'Participant', 'Interactions'],

                ['Person 1', 'Person 2', 6], ['Person 1', 'Person 3', 2], ['Person 1', 'Person 4', 8], ['Person 1', 'Person 5', 1]
                //{% for group in interaction_data %}
                    //['Person 1', 'Person 2', 5]
                    //['{{ group.0 }}', '{{ group.1 }}', {{ group.2 }}],
                    
                    //{% if group.2 == 0 %}
                    //    ['{{ group.0 }}', '{{ group.1 }}', 1],
                    //{% else %}
                    //    ['{{ group.0 }}', '{{ group.1 }}', {{ group.2 }}],
                    //{% endif %}
                    
                //{% endfor %}
            ]);


            var colors = ['#006992', '#bc4b51', '#eca400', '#5b8e7d', '#784c9f'] ;

            var options = {
                tooltip: {
                    trigger: 'selection',
                    textStyle: {
                        color: '#000',
                        fontName: 'Times New Roman',
                        fontSize: '11',
                    }
                    //isHtml: '{{sankey_options.0}}',
                    
                },
                sankey: {
                    node: {
                        colors: colors,
                        label: { 
                            color: 'transparent',
                        },
                        interactivity: false,
                    },
                    link: {
                        colorMode: 'target',
                        color: { fill: '#d799ae', fillOpacity: 0.9 },
                    }
                } 
            };

            // Instantiates and draws our chart, passing in some options.
            var chart = new google.visualization.Sankey(
                document.getElementById('interactionchart'));
            chart.draw(data, options);

        }
        
        //emotion chart
        function emotionChart(){

            var data = google.visualization.arrayToDataTable([
                ['Label', 'Value'],
                ['', {{emotion_data}}]
            ]);

            var options = {
                backgroundColor: '#f1f1f1',
                legend: 'none',
                fontName: 'Times New Roman',
                redFrom: 0, redTo: 15,
                yellowFrom:70, yellowTo: 100,
                minorTicks: 5
            };

            var chart = new google.visualization.Gauge(document.getElementById('emotionchart'));

            chart.draw(data, options);

        }

        </script>

        <!-- Gauge Chart Styling stuff -->
        <style>
            /* Outer-ring */
            #emotionchart circle:nth-child(1) {
            stroke-width: 5;
            stroke: #999;
            fill: #f1f1f1;
            }

            /* Main background */
            #emotionchart circle:nth-child(2) {
            fill: #f1f1f1;
            stroke: #ccc;
            stroke-width: 5;
            }

            /* Circle of the pointer */
            #emotionchart circle:nth-child(3) {
            fill: #222222;
            stroke: #222222;
            stroke-width: 3px;
            }

            /* Main text of the gauge */
            #emotionchart text {
            fill: black;
            font-family: 'Times New Roman';
            }

            /* Current value text */
            #emotionchart text:nth-child(1) {
            fill: transparent;
            font-size: 33;
            font-weight: 700;
            font-family: 'Times New Roman';
            }

            /* Ticks */
            #emotionchart path {
            stroke: #535353;
            }

            /* Circle */
            #emotionchart path:nth-child(2) {
            fill: #222222;
            stroke: #222222;
            stroke-width: 2px;
            fill-opacity: 1;
            }

            /* Warning area */
            #emotionchart path:nth-child(3) {
            fill: #5a915a;
            }

            /* Danger area */
            #emotionchart path:nth-child(4) {
            fill: #833333;
            }
        </style>



</head>
<body style="font-family: 'Times New Roman'">
    <!-- Sankey tooltip 
    {% if info == '0' %}
        <style>div.google-visualization-tooltip {display: none;}</style>
    {% else %}
        <style>div.google-visualization-tooltip {display: block; margin-left: 40px; width: 130px;}</style>
    {% endif %}
-->


    <!-- TOP BAR -->
    {% if layout == '1' %}
        <div class="container" style="padding-top: 2%;">
            <div class="row" style="background: #f1f1f1; height: 290px;">
                <div class="col-sm-2" style="background: #f1f1f1; width: 12.5%" align="center">
                    <br>
                    <!-- Settings -->
                    <div class="dropdown show" style="display: inline-block; ">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span style="color: black;">
                                <!-- Gear Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                                </svg>
                            </span>
                        </a>
                    
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">

                            Text:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=0 %}">No text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=1 %}">/ Text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=2 %}">/ Large Text</a>
                            <div class="dropdown-divider"></div>
                            Size:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=0 info=info %}">Small /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=1 info=info %}">/ Large</a>
                            <div class="dropdown-divider"></div>
                            Layout:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=0 size=size info=info %}">Split /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=1 size=size info=info %}">/ Top Bar /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=2 size=size info=info %}">/ Side 1 /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=3 size=size info=info %}">/ Side 2</a>
                            <div class="dropdown-divider"></div>
                            Color:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=info %}">Default /</a>

                        </div>
                    </div>
                    {% if info == '2' %}
                        <p style="font-size: 16px;">Hello {{user_profile.username}}!</p>
                        <!--<p style="font-size: 16px;">Meeting: {{meeting_object.title}}</p>-->
                    {% else %}
                        <p>Hello {{user_profile.username}}!</p>
                        <!--<p>Meeting: {{meeting_object.title}}</p>-->
                    {% endif %}
                    <!--##########-->
                </div>
                <div class="col-sm-2" style="background: #f1f1f1; width: 12.5%;" align="center">
                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Participants</p>
                    {% else %}
                        <p class="text-center">Participants</p>
                    {% endif %}
                    {% for each_user in user_colors %}
                        <div style="font-size: {{pie_options.3}}px;">{{each_user.0}}  <span class="badge" style="background-color: {{each_user.1}}">&nbsp;</span></div>
                    {% endfor %}
                </div>
                <div class="col-sm-2" style="background: #f1f1f1; width: 18.5%;" align="center">
                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Talking Time</p>
                    {% else %}
                        <p class="text-center">Talking Time</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="talkchart" style="width: 85%; height: 150px;"></div>
                    {% else %}
                        <div id="talkchart" style="width: 75%; height: 100px;"></div>
                    {% endif %}
                </div>
                <div class="col-sm-2" style="background: #f1f1f1; width: 18.5%;" align="center">
                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Overlaps</p>
                    {% else %}
                        <p class="text-center">Overlaps</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="overlapchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="overlapchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}
                </div>
                <div class="col-sm-2" style="background: #f1f1f1; width: 18.5%;" align="center">
                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Back-Channels</p>
                    {% else %}
                        <p class="text-center">Back-Channels</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="backchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="backchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}
                </div>
                <div class="col-sm-2" style="background: #f1f1f1; width: 18.5%;" align="center">
                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Attentiveness</p>
                    {% else %}
                        <p class="text-center">Attentiveness</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="emotionchart" style="width: 100%; height: 100px;"></div>
                    {% else %}
                        <div id="emotionchart" style="width: 100%; height: 80px;"></div>
                    {% endif %}

                    
                    
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Interactions</p>
                    {% else %}
                        <p class="text-center">Interactions</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="sankey_basic" style="width: 90%; height: 100px; margin-top: 15%;"></div>
                    {%else%}
                        <div id="sankey_basic" style="width: 70%; height: 85px; margin-top: 15%;"></div>
                    {% endif %}

                </div>
            </div>
        </div>


    <!-- SIDE 1 -->
    {% elif layout == '2' %}
        <div class="container" style="padding-top: 2%;">
            <div class="row">
                <!--Left side charts-->
                <div class="col-sm-2" style="background: #f1f1f1; height: 590px;" align="center">
                    <br>
                    <!-- Settings -->
                    <div class="dropdown show" style="display: inline-block; ">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span style="color: black;">
                                <!-- Gear Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                                </svg>
                            </span>
                        </a>
                    
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">

                            Text:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=0 %}">No text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=1 %}">/ Text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=2 %}">/ Large Text</a>
                            <div class="dropdown-divider"></div>
                            Size:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=0 info=info %}">Small /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=1 info=info %}">/ Large</a>
                            <div class="dropdown-divider"></div>
                            Layout:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=0 size=size info=info %}">Split /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=1 size=size info=info %}">/ Top Bar /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=2 size=size info=info %}">/ Side 1 /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=3 size=size info=info %}">/ Side 2</a>
                            <div class="dropdown-divider"></div>
                            Color:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=info %}">Default /</a>

                        </div>
                    </div>
                    {% if info == '2' %}
                        <p style="font-size: 16px;">Hello {{user_profile.username}}!</p>
                        <!--<p style="font-size: 16px;">Meeting: {{meeting_object.title}}</p>-->
                    {% else %}
                        <p>Hello {{user_profile.username}}!</p>
                        <!--<p>Meeting: {{meeting_object.title}}</p>-->
                    {% endif %}
                    <!--##########-->

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Participants</p>
                    {% else %}
                        <p class="text-center">Participants</p>
                    {% endif %}
                    {% for each_user in user_colors %}
                        <div style="font-size: {{pie_options.3}}px;">{{each_user.0}}  <span class="badge" style="background-color: {{each_user.1}}">&nbsp;</span></div>
                    {% endfor %}

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Talking Time</p>
                    {% else %}
                        <p class="text-center">Talking Time</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="talkchart" style="width: 85%; height: 150px;"></div>
                    {% else %}
                        <div id="talkchart" style="width: 75%; height: 100px;"></div>
                    {% endif %}

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Attentiveness</p>
                    {% else %}
                        <p class="text-center">Attentiveness</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="emotionchart" style="width: 100%; height: 100px;"></div>
                    {% else %}
                        <div id="emotionchart" style="width: 100%; height: 80px;"></div>
                    {% endif %}


                </div>
                <!--Right side charts-->
                <div class="col-sm-2" style="background: #f1f1f1; height: 590px;" align="center">
                    
                    

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Overlaps</p>
                    {% else %}
                        <p class="text-center">Overlaps</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="overlapchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="overlapchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}


                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Back-Channels</p>
                    {% else %}
                        <p class="text-center">Back-Channels</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="backchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="backchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}

                    <br>
                    
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Interactions</p>
                    {% else %}
                        <p class="text-center">Interactions</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="sankey_basic" style="width: 90%; height: 100px; margin-top: 15%;"></div>
                    {%else%}
                        <div id="sankey_basic" style="width: 70%; height: 85px; margin-top: 15%;"></div>
                    {% endif %}

                </div>
            </div>
        </div>

        
    <!-- SIDE 2 -->
    {% elif layout == '3' %}
        <div class="container" style="padding-top: 2%;">
            <div class="row">
                <!--Left side charts-->
                <div class="col-sm-2" style="background: #f1f1f1; height: 1200px;" align="center">
                    <br>
                    <!-- Settings -->
                    <div class="dropdown show" style="display: inline-block; ">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span style="color: black;">
                                <!-- Gear Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                                </svg>
                            </span>
                        </a>
                    
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">

                            Text:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=0 %}">No text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=1 %}">/ Text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=2 %}">/ Large Text</a>
                            <div class="dropdown-divider"></div>
                            Size:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=0 info=info %}">Small /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=1 info=info %}">/ Large</a>
                            <div class="dropdown-divider"></div>
                            Layout:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=0 size=size info=info %}">Split /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=1 size=size info=info %}">/ Top Bar /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=2 size=size info=info %}">/ Side 1 /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=3 size=size info=info %}">/ Side 2</a>
                            <div class="dropdown-divider"></div>
                            Color:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=info %}">Default /</a>

                        </div>
                    </div>
                    {% if info == '2' %}
                        <p style="font-size: 16px;">Hello {{user_profile.username}}!</p>
                        <!--<p style="font-size: 16px;">Meeting: {{meeting_object.title}}</p>-->
                    {% else %}
                        <p>Hello {{user_profile.username}}!</p>
                        <!--<p>Meeting: {{meeting_object.title}}</p>-->
                    {% endif %}
                    <!--##########-->

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Participants</p>
                    {% else %}
                        <p class="text-center">Participants</p>
                    {% endif %}
                    {% for each_user in user_colors %}
                        <div style="font-size: {{pie_options.3}}px;">{{each_user.0}}  <span class="badge" style="background-color: {{each_user.1}}">&nbsp;</span></div>
                    {% endfor %}

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Talking Time</p>
                    {% else %}
                        <p class="text-center">Talking Time</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="talkchart" style="width: 85%; height: 150px;"></div>
                    {% else %}
                        <div id="talkchart" style="width: 75%; height: 100px;"></div>
                    {% endif %}

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Attentiveness</p>
                    {% else %}
                        <p class="text-center">Attentiveness</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="emotionchart" style="width: 100%; height: 100px;"></div>
                    {% else %}
                        <div id="emotionchart" style="width: 100%; height: 80px;"></div>
                    {% endif %}

                    <!--#############-->

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Overlaps</p>
                    {% else %}
                        <p class="text-center">Overlaps</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="overlapchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="overlapchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}


                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Back-Channels</p>
                    {% else %}
                        <p class="text-center">Back-Channels</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="backchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="backchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}

                    <br>
                    
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Interactions</p>
                    {% else %}
                        <p class="text-center">Interactions</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="sankey_basic" style="width: 90%; height: 100px; margin-top: 15%;"></div>
                    {%else%}
                        <div id="sankey_basic" style="width: 70%; height: 85px; margin-top: 15%;"></div>
                    {% endif %}

                </div>
            </div>
        </div>

    <!-- SPLIT DISPLAY (default) -->
    {% else %}
        <div class="container" style="padding-top: 2%;">
            <div class="row">
                <div class="col-sm-2" style="background: #f1f1f1; height: 590px;" align="center">
                    <br>
                    <!-- Settings -->
                    <div class="dropdown show" style="display: inline-block; ">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span style="color: black;">
                                <!-- Gear Icon -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                                    <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                                    <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                                </svg>
                            </span>
                        </a>
                    
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink" style="font-size: {{settings_font}}px; padding: 5px;">
        
                            Text:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=0 %}">No text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=1 %}">/ Text / </a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=2 %}">/ Large Text</a>
                            <div class="dropdown-divider"></div>
                            Size:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=0 info=info %}">Small /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=1 info=info %}">/ Large</a>
                            <div class="dropdown-divider"></div>
                            Layout:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=0 size=size info=info %}">Split /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=1 size=size info=info %}">/ Top Bar /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=2 size=size info=info %}">/ Side 1 /</a>
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=3 size=size info=info %}">/ Side 2</a>
                            <div class="dropdown-divider"></div>
                            Color:
                            <a class="dropdown-item" href="{% url 'scratch' user_id=user_profile.user_id layout=layout size=size info=info %}">Default /</a>

                        </div>
                    </div>
                    {% if info == '2' %}
                        <p style="font-size: 16px;">Hello {{user_profile.username}}!</p>
                        <!--<p style="font-size: 16px;">Meeting: {{meeting_object.title}}</p>-->
                    {% else %}
                        <p>Hello {{user_profile.username}}!</p>
                        <!--<p>Meeting: {{meeting_object.title}}</p>-->
                    {% endif %}
                    
                    <!--LEFT SIDE CHARTS-->
                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Participants</p>
                    {% else %}
                        <p class="text-center">Participants</p>
                    {% endif %}
                    {% for each_user in user_colors %}
                        <div style="font-size: {{pie_options.3}}px;">{{each_user.0}}  <span class="badge" style="background-color: {{each_user.1}}">&nbsp;</span></div>
                    {% endfor %}

                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Attentiveness</p>
                    {% else %}
                        <p class="text-center">Attentiveness</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="emotionchart" style="width: 100%; height: 100px;"></div>
                    {% else %}
                        <div id="emotionchart" style="width: 100%; height: 80px;"></div>
                    {% endif %}

                    <br>

                    
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 18px;">Interactions</p>
                    {% else %}
                        <p class="text-center">Interactions</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="sankey_basic" style="width: 90%; height: 100px; margin-top: 15%;"></div>
                    {%else%}
                        <div id="sankey_basic" style="width: 70%; height: 85px; margin-top: 15%;"></div>
                    {% endif %}
                    

                </div>

                <div class="col-sm-8">
                    &nbsp;
                </div>

                <div class="col-sm-2" style="background: #f1f1f1; height: 590px;" align="center">
                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Talking Time</p>
                    {% else %}
                        <p class="text-center">Talking Time</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="talkchart" style="width: 85%; height: 150px;"></div>
                    {% else %}
                        <div id="talkchart" style="width: 75%; height: 100px;"></div>
                    {% endif %}


                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Overlaps</p>
                    {% else %}
                        <p class="text-center">Overlaps</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="overlapchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="overlapchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}


                    <br>
                    {% if info == '2' %}
                        <p class="text-center" style="font-size: 17px;">Back-Channels</p>
                    {% else %}
                        <p class="text-center">Back-Channels</p>
                    {% endif %}
                    {% if size == '1' %}
                        <div id="backchart" style="width: 100%; height: 120px;"></div>
                    {% else %}
                        <div id="backchart" style="width: 90%; height: 100px;"></div>
                    {% endif %}

                </div>
            </div>
        </div>
    {% endif %}

    <div class="alert alert-info" role="alert" style="width: 250px; margin: 15px;">
        <a href="../html-link.htm" target="popup" onclick="window.open('../html-link.htm','name','width=1500,height=1500')">Open page in new window</a>
    </div>
    <!-- Gabby's computer: 'width=1200,height=800'-->
    
</body>